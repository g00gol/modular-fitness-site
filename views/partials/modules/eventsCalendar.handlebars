<script src="../../../public/js/modules/eventsCalendar.js"></script>

{{#> module moduleName="Events Calendar"}}
{{#> panels/panel-2}}
<div class="flex justify-between">
  <h2 class="w-fit">Upcoming Events</h2>
  <label><button id="shareCalendarBtn" class="w-fit text-xl hover:text-snow-1 transition-colors" {{#if eventsCalendar.auth}}{{else}}hidden{{/if}}><i class="fa-solid fa-share"></i></button></label>
</div>
{{#if eventsCalendar.auth}}
{{#if eventsCalendar.upcoming}}
<ul class="space-y-4">
  {{#each eventsCalendar.upcoming}}
  <div>
    <li>{{this.title}}</li>
    <li>{{this.start}} - {{this.end}}</li>
  </div> {{/each}}
</ul>
{{else}}
<p>No upcoming events</p>
{{/if}}
<a href="/modules/calendar">View full calendar</a>
{{else}}
<a href="/modules/calendar/auth">Log in to view events</a>
{{/if}}
{{/panels/panel-2}}
{{/module}}

{{!-- Share Calendar Modal --}}
<div id="shareCalendarModal" class="fixed top-0 left-nav" hidden>
{{#> modal modalName="Share Calendar"}}
<form id="shareCalendarForm">
  <label>Email<input id="shareEmail" name="shareEmail" type="email"></label>
  <label><input id="shareCalendarInput" type="text" readonly></label>

  <div class="errorContainer">
    {{#each error}}
    <p class="error">
      {{this}}
    </p>
    {{/each}}
  </div>

  <div id="shareCalendarBtns" class="eventsFormBtns !mt-[5vh] space-x-4">
    <button id="shareCalendarSubmit" type="submit"
      class="w-fit px-6 py-2 text-snow-3 hover:text-snow-1 underline bg-frost rounded-std">Save</button>
    <button id="shareCalendarCancel" type="button" class="w-fit text-gray-2 hover:text-gray-1 underline">Cancel</button>
  </div>
</form>
{{/modal}}
</div>